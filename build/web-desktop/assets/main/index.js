System.register("chunks:///_virtual/CharacterControllerDebugRenderer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DebugDraw.ts"],(function(e){var r,t,o,n,a,i,c,s;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,n=e.CharacterController,a=e.CapsuleCharacterController,i=e.Color,c=e.Component},function(e){s=e.drawCapsule}],execute:function(){var u;t._RF.push({},"074883d0KtP5qEyJ3V0gk2S","CharacterControllerDebugRenderer",void 0);var l=o.ccclass;o.property,e("CharacterControllerDebugRenderer",l("CharacterControllerDebugRenderer")(u=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.update=function(e){var r=this.node.getComponent(n);r instanceof a&&(s(this.node.worldPosition,r.center,r.radius,r.height),s(this.node.worldPosition,r.center,r.radius+r.skinWidth,r.height,i.BLACK))},t}(c))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Component.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("injectComponent",(function(e,t){void 0===t&&(t=!1);return function(o,r){var i,c=Object.getOwnPropertyDescriptor(o,n);if(c){if("function"!=typeof c.value)throw new Error("The existing 'start' property is not a function.");i=c.value}var u={configurable:!0,enumerable:!1,writable:!0,value:function(){var n=t?this.node.getComponentInChildren(e):this.node.getComponent(e);Reflect.set(this,r,n),i&&i.apply(this)}};Object.defineProperty(o,n,u)}})),t._RF.push({},"8ff8bJLUPxLe7wlF2WPYLbn","Component",void 0);var n="onLoad";t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DebugDraw.ts",["cc"],(function(e){var n,r,d,i,o,t,a;return{setters:[function(e){n=e.cclegacy,r=e.Color,d=e.Vec3,i=e.geometry,o=e.find,t=e.Camera,a=e.director}],execute:function(){function u(){var e,n,r=void 0;if(r=null==(n=o("Main Camera"))||null==(n=n.getComponent(t))?void 0:n.camera)return r&&r.initGeometryRenderer(),r&&r.geometryRenderer||(null==(e=a.root)?void 0:e.pipeline.geometryRenderer)}e({drawCapsule:function(e,n,i,o,t){void 0===t&&(t=r.GREEN);var a=u();if(!a)return;a.addCapsule(d.add(new d,e,n),i,o,t,10,4,!0)},drawCube:function(e,n,o){void 0===o&&(o=r.WHITE);var t=u();if(!t)return t;"number"==typeof n&&(n=new d(n,n,n));t.addBoundingBox(i.AABB.fromPoints(new i.AABB,d.scaleAndAdd(new d,e,n,-.5),d.scaleAndAdd(new d,e,n,.5)),o,!0)},drawLineFromTo:function(e,n,d){void 0===d&&(d=r.WHITE);var i=u();if(!i)return i;i.addLine(e,n,d)},drawLineOriginDirLen:function(e,n,i,o){void 0===o&&(o=r.WHITE);var t=u();if(!t)return t;t.addLine(e,d.scaleAndAdd(new d,e,n,i),o)},drawSphere:function(e,n,d){void 0===d&&(d=r.GREEN);var i=u();if(!i)return;i.addSphere(e,n,d,10,4,!0)}}),n._RF.push({},"5f0ddC+yOtAWJzGeF3brx54","DebugDraw",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Env.ts",["cc"],(function(e){var t,u;return{setters:[function(e){t=e.cclegacy,u=e.sys}],execute:function(){e("useMouseInput",(function(){return!u.hasFeature(u.Feature.INPUT_TOUCH)})),t._RF.push({},"a8e74fzgpdNS4WNl5PVwPZm","Env",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Event.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.EventTarget}],execute:function(){e._RF.push({},"0d6c4v67HpIW7KV06ryG8UA","Event",void 0);t("Event",function(){function t(){this._eventTarget=new n}var e=t.prototype;return e.subscribe=function(t,e){this._eventTarget.on("",t,e)},e.unsubscribe=function(t,e){this._eventTarget.off("",t,e)},e.invoke=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this._eventTarget).emit.apply(t,[""].concat(n))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FollowCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Interop.ts"],(function(t){var i,e,a,o,r,n,c,l,s,u,p,h,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,c=t.Node,l=t.Vec3,s=t.math,u=t.clamp,p=t.Component},function(t){h=t.constantSpeedInterop,m=t.interopToVec3}],execute:function(){var d,_,f,y,D,V,b,g,w,z,T,v,I,N,A,R,k,P,H,x;r._RF.push({},"e4ecedi9Z1HuZujkzSkGFJj","FollowCamera",void 0);t("FollowCamera",(d=n.ccclass("FollowCamera"),_=n.executionOrder(9999),f=n.property({displayName:"Min Distance",tooltip:"Min distance from camera to the target."}),y=n.property({displayName:"Max Distance",tooltip:"Max distance from camera to the target."}),D=n.property({displayName:"Init Distance",tooltip:"Initial distance from camera to the target."}),V=n.property({displayName:"Init Hori Rotation",tooltip:"Initial horizontal rotation."}),b=n.property({displayName:"Init Vert Rotation",tooltip:"Initial vertical rotation."}),g=n.property({type:c,displayName:"target",tooltip:"The target that given camera follows."}),w=n.property({displayName:"Auto Track",tooltip:"Camera automatically follows the target. When turned on, camera automatically adjust to the back of target."}),z=n.property({displayName:"Auto Track Speed",tooltip:"Camera move speed when automatically follows the target.",visible:function(){return this.autoTraceEnabled}}),d(T=_((I=i((v=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return i=t.call.apply(t,[this].concat(r))||this,a(i,"minDistance",I,o(i)),a(i,"maxDistance",N,o(i)),a(i,"initialDistance",A,o(i)),a(i,"initialHorizonRotation",R,o(i)),a(i,"initialVerticalRotation",k,o(i)),a(i,"target",P,o(i)),a(i,"autoTraceEnabled",H,o(i)),a(i,"autoTraceSpeed",x,o(i)),i._lookAtPosition=new l,i._distance=0,i._desiredDistance=0,i._currentDir=s.Vec3.negate(new s.Vec3,s.Vec3.UNIT_Z),i}e(i,t);var r=i.prototype;return r.start=function(){l.copy(this._lookAtPosition,this.target.position),this._desiredDistance=this.initialDistance,this._distance=this._desiredDistance,this._rotateHorizontal(this.initialHorizonRotation),this._rotateVertical(this.initialVerticalRotation),this._updatePosition()},r.update=function(t){this._distance=h(this._distance,this._desiredDistance,t,5),this._zoom(this._distance),m(this._lookAtPosition,this._lookAtPosition,this.target.worldPosition,t,6),this._updatePosition()},r.rotateHorizontal=function(t){this._rotateHorizontal(t)},r.rotateVertical=function(t){this._rotateVertical(t)},r.zoom=function(t){this._zoomDelta(t)},r._calcTransform=function(t,i,e){var a=s.Vec3.normalize(new s.Vec3,this._currentDir);s.Quat.fromViewUp(e,a,s.Vec3.UNIT_Y),s.Vec3.add(i,t,this._currentDir)},r._updatePosition=function(){var t=new s.Vec3,i=new s.Quat;this._calcTransform(this._lookAtPosition,t,i),this.node.position=t,this.node.rotation=i},r._zoom=function(t){s.Vec3.normalize(this._currentDir,this._currentDir),s.Vec3.multiplyScalar(this._currentDir,this._currentDir,t)},r._zoomDelta=function(t){this._desiredDistance=u(this._distance+t,this.minDistance,this.maxDistance)},r._rotateHorizontal=function(t){var i=s.Quat.fromAxisAngle(new s.Quat,s.Vec3.UNIT_Y,s.toRadian(t));s.Vec3.transformQuat(this._currentDir,this._currentDir,i)},r._rotateVertical=function(t){var i=s.Vec3.normalize(new s.Vec3,this._currentDir),e=s.Vec3.UNIT_Y,a=s.Vec3.cross(new s.Vec3,i,e);s.Vec3.normalize(a,a);var o=s.toDegree(s.Vec3.angle(i,e)),r=o-s.clamp(o-t,10.01,119.99),n=s.Quat.fromAxisAngle(new s.Quat,a,s.toRadian(r));s.Vec3.transformQuat(this._currentDir,this._currentDir,n)},i}(p)).prototype,"minDistance",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),N=i(v.prototype,"maxDistance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),A=i(v.prototype,"initialDistance",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=i(v.prototype,"initialHorizonRotation",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=i(v.prototype,"initialVerticalRotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),P=i(v.prototype,"target",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(v.prototype,"autoTraceEnabled",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=i(v.prototype,"autoTraceSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),T=v))||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/FollowCameraInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FollowCamera.ts","./Env.ts"],(function(e){var t,o,n,i,s,r,a,u,h,c,l,p,d,f,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose,r=e.createClass},function(e){a=e.cclegacy,u=e._decorator,h=e.Node,c=e.EventMouse,l=e.Vec2,p=e.toDegree,d=e.Component},function(e){f=e.FollowCamera},function(e){_=e.useMouseInput}],execute:function(){var T,m,v,g,E,M,y,S,b,O,w,U,z;a._RF.push({},"af3e3igI0dNfqSLEz+pHrOM","FollowCameraInput",void 0);var B=u.ccclass,D=u.property;e("FollowCameraInput",(T=B("FollowCameraInput"),m=D(f),v=D({displayName:"Hori Rotation Speed",tooltip:"Rotation speed on horizontal axis."}),g=D({displayName:"Vert Rotation Speed",tooltip:"Vertical speed on horizontal axis."}),E=D({displayName:"Scroll Zoom Speed",tooltip:"Zoom speed with the mouse scroll wheel."}),M=D({displayName:"Touchpad Zoom Speed",tooltip:"Zoom speed with a touch pad."}),T((b=t((S=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"camera",b,i(t)),n(t,"horizontalRotationSpeed",O,i(t)),n(t,"verticalRotationSpeed",w,i(t)),n(t,"mouseWheelSpeed",U,i(t)),n(t,"touchZoomSpeed",z,i(t)),t._interpretTouchAsMouse=!1,t._mouseButtonPressing={left:!1,right:!1,middle:!1},t._previousTwoTouchDistance=0,t._touches=[],t}o(t,e);var a=t.prototype;return a.start=function(){},a.onEnable=function(){this._interpretTouchAsMouse=_(),this.node.on(h.EventType.MOUSE_DOWN,this._onMouseDown,this),this.node.on(h.EventType.MOUSE_UP,this._onMouseUp,this),this.node.on(h.EventType.MOUSE_WHEEL,this._onMouseWheel,this),this.node.on(h.EventType.TOUCH_START,this._onTouchBegin,this),this.node.on(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this._onTouchEnd,this)},a.onDisable=function(){this.node.off(h.EventType.MOUSE_DOWN,this._onMouseDown,this),this.node.off(h.EventType.MOUSE_UP,this._onMouseUp,this),this.node.off(h.EventType.MOUSE_WHEEL,this._onMouseWheel,this),this.node.off(h.EventType.TOUCH_START,this._onTouchBegin,this),this.node.off(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(h.EventType.TOUCH_END,this._onTouchEnd,this)},a.update=function(e){},a._onMouseDown=function(e){switch(e.getButton()){default:break;case c.BUTTON_LEFT:this._mouseButtonPressing.left=!0;break;case c.BUTTON_RIGHT:this._mouseButtonPressing.right=!0;break;case c.BUTTON_MIDDLE:this._mouseButtonPressing.middle=!0}},a._onMouseUp=function(e){switch(e.getButton()){default:break;case c.BUTTON_LEFT:this._mouseButtonPressing.left=!1;break;case c.BUTTON_RIGHT:this._mouseButtonPressing.right=!1;break;case c.BUTTON_MIDDLE:this._mouseButtonPressing.middle=!1}},a._onMouseWheel=function(e){var t=-this.mouseWheelSpeed*Math.sign(e.getScrollY());this.camera.zoom(t)},a._onTouchBegin=function(e){for(var t,o=e.getTouches(),n=s(o);!(t=n()).done;){var i=t.value;this._touches.length<2&&this._touches.push({id:i.getID(),location:l.clone(i.getLocation())})}},a._onTouchMove=function(e){var t=e.getTouches();if(1!==t.length){if(console.log("Touches Move: "+this._touches.length),2===this._touches.length&&2===t.length){var o=this._touches.map((function(e){var o=e.id;return t.find((function(e){return e.getID()===o}))}));if(!o.some((function(e){return!e}))){var n=this._touches[0].location,i=this._touches[1].location,s=o[0].getLocation(),r=o[1].getLocation(),a=l.subtract(new l,s,n);l.normalize(a,a);var u=l.subtract(new l,r,i);l.normalize(u,u);var h=p(l.angle(a,u));if(h>170){var c=l.distance(n,i),d=l.distance(s,r)-c;if(0!==d){var f=-this.touchZoomSpeed*d;this.camera.zoom(f)}}else if(h<10){var _=l.subtract(new l,s,n),T=_.x;if(T){var m=-T*this.horizontalRotationSpeed;this.camera.rotateHorizontal(m)}var v=_.y;if(v){var g=-v*this.verticalRotationSpeed;this.camera.rotateVertical(g)}}l.copy(n,s),l.copy(i,r)}}}else this._handSingleTouchMove(e)},a._onTouchEnd=function(e){this._touches=this._touches.filter((function(t){return e.getTouches().findIndex((function(e){return e.getID()===t.id}))<0}))},a._handSingleTouchMove=function(e){this._interpretTouchAsMouse&&!this._mouseOrTouchMoveEnabled||this._rotateHorizontalByTouchMove(e.getDeltaX(),e.getDeltaY())},a._rotateHorizontalByTouchMove=function(e,t){if(e){var o=-e*this.horizontalRotationSpeed;this.camera.rotateHorizontal(o)}if(t){var n=-t*this.verticalRotationSpeed;this.camera.rotateVertical(n)}},r(t,[{key:"_mouseOrTouchMoveEnabled",get:function(){return this._mouseButtonPressing.left}}]),t}(d)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(S.prototype,"horizontalRotationSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=t(S.prototype,"verticalRotationSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=t(S.prototype,"mouseWheelSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(S.prototype,"touchZoomSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),y=S))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Predefined.ts"],(function(e){var t,n,i,r,s,a,o,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e.director,r=e.Director,s=e.input,a=e.Input},function(e){o=e.predefinedAxes,c=e.predefinedActions}],execute:function(){n._RF.push({},"1e5a0xuGE9D9oEgieIenEPM","Input",void 0);var u=function(){function e(){var e=this;this._axes={},this._actions={},this._pressedKeys=new Set;for(var t=0,n=Object.entries(o);t<n.length;t++){var s=n[t],a=s[0],u=s[1].mappings;this._addAxis.apply(this,[a].concat(u))}for(var d=0,p=Object.entries(c);d<p.length;d++){var h=p[d],g=h[0],l=h[1].mappings;this._addAction.apply(this,[g].concat(l))}this._initialize(),i.on(r.EVENT_BEFORE_UPDATE,(function(){e.update(0)}))}var n=e.prototype;return n.getAxisValue=function(e){var t,n;return null!=(t=null==(n=this._axes[e])?void 0:n.axis.value)?t:0},n.getAction=function(e){var t,n;return null!=(t=null==(n=this._actions[e])?void 0:n.triggered)&&t},n.update=function(e){for(var n=0,i=Object.entries(this._actions);n<i.length;n++){var r=i[n],s=(r[0],r[1]);s.triggered=!1,s.triggered2&&(s.triggered=!0,s.triggered2=!1)}for(var a=0,o=Object.entries(this._axes);a<o.length;a++){for(var c,u=o[a],d=(u[0],u[1]),p=d.axis,h=d.mappings,g=0,l=t(h);!(c=l()).done;){var f=c.value;this._pressedKeys.has(f.keyCode)&&(g+=1*f.scale)}p.value=g}},n._addAxis=function(e){for(var t=this._axes[e]=new h,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s=0,a=i;s<a.length;s++){var o=a[s],c=o.keyCode,u=o.scale;t.mappings.push(new p(c,u))}},n._addAction=function(e){for(var t=this._actions[e]=new f,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s=0,a=i;s<a.length;s++){var o=a[s].keyCode;t.mappings.push(new l(o))}},n._initialize=function(){var e=this;s.on(a.EventType.KEY_DOWN,(function(t){e._pressedKeys.add(t.keyCode);for(var n=0,i=Object.entries(e._actions);n<i.length;n++){var r=i[n],s=(r[0],r[1]);s.mappings.some((function(e){return e.keyCode===t.keyCode}))&&(s.triggered2=!0)}})),s.on(a.EventType.KEY_UP,(function(t){e._pressedKeys.delete(t.keyCode)}))},e}(),d=function(){this.value=0},p=function(e,t){this.keyCode=void 0,this.scale=void 0,this.keyCode=e,this.scale=t},h=function(){this.axis=new d,this.mappings=[]},g=function(){},l=function(e){this.keyCode=e},f=function(){this.action=new g,this.mappings=[],this.triggered=!1,this.triggered2=!1};e("globalInputManager",new u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Interop.ts",["cc"],(function(t){var r,e,n,o,u,c,a;return{setters:[function(t){r=t.cclegacy,e=t.clamp,n=t.Quat,o=t.Vec4,u=t.clamp01,c=t.EPSILON,a=t.lerp}],execute:function(){function i(t,r,n,o){if(o<=0)return r;var u=r-t;return Math.pow(u,2)<1e-8?r:t+u*e(n*o,0,1)}t({constantSpeedInterop:function(t,r,e,n){if(n<=0)return r;var o=r-t;if(Math.pow(o,2)<1e-8)return r;var c=u(e*n/Math.abs(o));return a(t,r,c)},interopTo:i,interopToQuat:function(t,r,e,a,i){if(i<=0)return n.copy(t,e);if(function(t,r,e){void 0===e&&(e=c);return n.equals(t,r,e)||o.equals(o.ZERO,new o(t.x+r.x,t.y+r.y,t.z+r.z,t.w+r.w),e)}(r,e))return n.copy(t,e);var p=u(a*i/Math.max((f=r,s=e,v=n.dot(f,s),Math.acos(2*v*v-1)),1e-6));var f,s,v;return n.slerp(t,r,e,p)},interopToVec3:function(t,r,e,n,o){return t.x=i(r.x,e.x,n,o),t.y=i(r.y,e.y,n,o),t.z=i(r.z,e.z,n,o),t}}),r._RF.push({},"be4f6+KgrpCq6vnZc1xPR32","Interop",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Procedural2-Animation.ts","./FollowCamera.ts","./FollowCameraInput.ts","./Procedural2Controller.ts","./Input.ts","./Predefined.ts","./Procedural2-Animation-UI.ts","./CharacterControllerDebugRenderer.ts","./Component.ts","./DebugDraw.ts","./TimeScale.ts","./TimeScaleUI.ts","./Env.ts","./Event.ts","./Interop.ts","./Node.ts","./ShowTraceSwitch.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Node.ts",["cc"],(function(t){var e,c;return{setters:[function(t){e=t.cclegacy,c=t.math}],execute:function(){t("getForward",(function(t){return c.Vec3.transformQuat(new c.Vec3,c.Vec3.UNIT_Z,t.worldRotation)})),e._RF.push({},"c68cdisgyVOdbw/s+22YHmB","Node",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Predefined.ts",["cc"],(function(e){var o,r;return{setters:[function(e){o=e.cclegacy,r=e.KeyCode}],execute:function(){var d,n;o._RF.push({},"c4e47lmNBdA17TPXiNYx+sT","Predefined",void 0);var i=e("PredefinedAxisId",function(e){return e[e.MoveForward=0]="MoveForward",e[e.MoveRight=1]="MoveRight",e}({})),s=e("PredefinedActionId",function(e){return e[e.Fire=0]="Fire",e[e.IronSights=1]="IronSights",e[e.Jump=2]="Jump",e[e.Reload=3]="Reload",e[e.Crouch=4]="Crouch",e[e.ControlMode=5]="ControlMode",e}({}));e("predefinedAxes",((d={})[i.MoveForward]={mappings:[{keyCode:r.KEY_W,scale:1},{keyCode:r.KEY_S,scale:-1}]},d[i.MoveRight]={mappings:[{keyCode:r.KEY_D,scale:1},{keyCode:r.KEY_A,scale:-1}]},d)),e("predefinedActions",((n={})[s.Fire]={mappings:[{keyCode:r.KEY_F}]},n[s.IronSights]={mappings:[{keyCode:r.KEY_Q}]},n[s.Jump]={mappings:[{keyCode:r.SPACE}]},n[s.Reload]={mappings:[{keyCode:r.KEY_R}]},n[s.Crouch]={mappings:[{keyCode:r.KEY_C}]},n[s.ControlMode]={mappings:[{keyCode:r.ALT_LEFT}]},n));o._RF.pop()}}}));

System.register("chunks:///_virtual/Procedural2-Animation-UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Procedural2-Animation.ts","./CharacterControllerDebugRenderer.ts","./ShowTraceSwitch.ts"],(function(e){var i,o,t,l,n,r,a,g,s,c,u,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,g=e.Toggle,s=e.Component},function(e){c=e.Procedural2_Animation},function(e){u=e.CharacterControllerDebugRenderer},function(e){d=e.setGlobalShowTraces}],execute:function(){var h,f,p,C,T,b,y,P,m,v,_,w,I,R,k;r._RF.push({},"11dbad9lR1Er5Y57XDzU53Y","Procedural2-Animation-UI",void 0);var z=a.ccclass,F=a.property;e("Procedural2_Animation_UI",(h=z("Procedural2-Procedural2_Animation_UI-UI"),f=F(g),p=F(g),C=F(g),T=F(g),b=F(g),y=F(g),h((v=i((m=function(e){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=e.call.apply(e,[this].concat(n))||this,t(i,"ikEnabledToggle",v,l(i)),t(i,"fitPelvisToggle",_,l(i)),t(i,"fitPositionToggle",w,l(i)),t(i,"fitRotationToggle",I,l(i)),t(i,"showTracesToggle",R,l(i)),t(i,"displayCCTColliderToggle",k,l(i)),i._displayCCTCollider=!1,i}o(i,e);var r=i.prototype;return r.start=function(){this.toggleIKEnabled(this.ikEnabledToggle),this.toggleFitPelvis(this.fitPelvisToggle),this.toggleFitPosition(this.fitPositionToggle),this.toggleFitRotation(this.fitRotationToggle),this.toggleShowTraces(this.showTracesToggle),this.toggleDisplayCCTCollider(this.displayCCTColliderToggle)},r.toggleIKEnabled=function(e){this._toggleBoolean("ikEnabled",e)},r.toggleFitPelvis=function(e){this._toggleBoolean("fitPelvis",e)},r.toggleFitPosition=function(e){this._toggleBoolean("fitPosition",e)},r.toggleFitRotation=function(e){this._toggleBoolean("fitRotation",e)},r.toggleShowTraces=function(e){d(e.isChecked)},r.toggleDisplayCCTCollider=function(e){this._displayCCTCollider=e.isChecked;for(var i,o=n(this.node.scene.getComponentsInChildren(u));!(i=o()).done;){i.value.enabled=e.isChecked}},r._toggleBoolean=function(e,i){var o=this.node.scene.getComponentInChildren(c);o&&(o[e]=i.isChecked)},i}(s)).prototype,"ikEnabledToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(m.prototype,"fitPelvisToggle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(m.prototype,"fitPositionToggle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(m.prototype,"fitRotationToggle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(m.prototype,"showTracesToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(m.prototype,"displayCCTColliderToggle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=m))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/Procedural2-Animation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Procedural2Controller.ts","./Component.ts","./DebugDraw.ts","./Interop.ts","./ShowTraceSwitch.ts"],(function(t){var i,o,e,n,r,a,s,l,u,c,f,h,p,_,d,m,y,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.animation,u=t.Vec3,c=t.Quat,f=t.physics,h=t.geometry,p=t.Component},function(t){_=t.Procedural2Controller},function(t){d=t.injectComponent},null,function(t){m=t.interopTo,y=t.interopToVec3,b=t.interopToQuat},null],execute:function(){var v,g,w,F,I,B,O,T,P,S,V,R,A,C,z,K,k,D,L,x,E,J,M,Q,N,Z,j,U,Y;r._RF.push({},"637209b2u9OWodSNn+ILOL8","Procedural2-Animation",void 0);var q=a.ccclass,H=a.property,W=a.requireComponent,G=(v=q("Procedural2_Animation.FootIkSetting"),g=H(s),w=H(s),F=H(s),I=H(s),B=H(s),v((P=i((T=function(){function t(){e(this,"fkBone",P,this),e(this,"ikBone",S,this),e(this,"deformBone",V,this),e(this,"bottomReferenceBone",R,this),e(this,"debugTargetBone",A,this),this.distanceToBottom=0}return t.prototype.calculateDistanceToBottom=function(){var t=this.deformBone,i=this.bottomReferenceBone,o=t&&i?t.worldPosition.y-i.worldPosition.y:0;this.distanceToBottom=o},t}()).prototype,"fkBone",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(T.prototype,"ikBone",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(T.prototype,"deformBone",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(T.prototype,"bottomReferenceBone",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(T.prototype,"debugTargetBone",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=T))||O),X=(t("Procedural2_Animation",(C=q("Procedural2_Animation"),z=W(l.AnimationController),K=W(_),k=H({min:0,unit:"m"}),D=H({min:0,unit:"m"}),L=d(l.AnimationController),x=d(_),C(E=z(E=K((M=i((J=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"debug",M,n(i)),e(i,"footIKTraceStartBias",Q,n(i)),e(i,"footIKTrackDistanceBelowFoot",N,n(i)),e(i,"leftFootIKSetting",Z,n(i)),e(i,"rightFootIKSetting",j,n(i)),i.ikEnabled=!0,i.fitPelvis=!0,i.fitPosition=!0,i.fitRotation=!0,e(i,"_animationController",U,n(i)),e(i,"_controller",Y,n(i)),i._pelvisOffset=new u,i._leftFootOffset=new X,i._rightFootOffset=new X,i._inAirTimer=0,i._velocityLR=0,i._velocityFB=0,i._isInAir=!0,i}o(i,t);var r=i.prototype;return r.start=function(){this.leftFootIKSetting.calculateDistanceToBottom(),this.rightFootIKSetting.calculateDistanceToBottom()},r.onEnable=function(){this._controller.onJumped.subscribe(this._onJumped,this)},r.onDisable=function(){this._controller.onJumped.unsubscribe(this._onJumped,this)},r.update=function(t){this._updateMovementState(t),this._updateAirState(t),this._updateFootIK(t)},r.lateUpdate=function(t){},r._onJumped=function(){this._animationController.setValue("Jump",!0)},r._updateMovementState=function(t){var i=this._controller.velocity,o=u.len(new u(i.x,0,i.z)),e=o>.01,n=this._controller.hasMovementInput,r=e&&n||o>1.5;this._animationController.setValue("ShouldMove",r),this._animationController.setValue("MoveSpeed",o);var a=new u,s=c.invert(new c,this.node.worldRotation);u.transformQuat(a,i,s),this._velocityLR=m(this._velocityLR,a.x,t,6),this._velocityFB=m(this._velocityFB,a.z,t,6),this._animationController.setValue("VelocityLR",this._velocityLR),this._animationController.setValue("VelocityFB",this._velocityFB)},r._updateAirState=function(t){var i=this._controller.velocity.y,o=!1;o=this._isInAir?this._controller.falling:this._controller.falling&&(i>0||i<.1*-this._controller.gravity),this._isInAir=o,this._animationController.setValue("InAir",this._isInAir)},r._updateFootIK=function(t){var i=this._calculateFootOffset(this.leftFootIKSetting,new X),o=this._calculateFootOffset(this.rightFootIKSetting,new X);this._leftFootOffset.interopTo(i,t),this._rightFootOffset.interopTo(o,t),this._updatePelvisOffset(t,i.position,o.position),this._setVarVec3OrZero("LeftFootOffset",this._leftFootOffset.position,this.fitPosition),this._setVarQuatOrIdentity("LeftFootRotationOffset",this._leftFootOffset.rotation,this.fitRotation),this._setVarVec3OrZero("RightFootOffset",this._rightFootOffset.position,this.fitPosition),this._setVarQuatOrIdentity("RightFootRotationOffset",this._rightFootOffset.rotation,this.fitRotation),this._setVarVec3OrZero("PelvisPositionOffset",this._pelvisOffset,this.fitPelvis),this._animationController.setValue("IKEnabled",this.ikEnabled)},r._setVarVec3OrZero=function(t,i,o){this._animationController.setValue_experimental(t,o?i:u.ZERO)},r._setVarQuatOrIdentity=function(t,i,o){this._animationController.setValue_experimental(t,o?i:c.IDENTITY)},r._calculateFootOffset=function(t,i){if(this._isInAir)return i.identity();var o=t.fkBone,e=t.ikBone,n=t.distanceToBottom,r=this.footIKTraceStartBias;if(!o||!e)return i.identity();var a=new u(o.worldPosition);a.y=this.node.worldPosition.y;var s=new u(a);u.scaleAndAdd(s,s,new u(0,1,0),r);var l=this.footIKTraceStartBias+this.footIKTrackDistanceBelowFoot,p=f.PhysicsSystem.instance;if(-9,!p.raycastClosest(h.Ray.set(new h.Ray,s.x,s.y,s.z,0,-1,0),-9,l,void 0))return i.identity();var _=p.raycastClosestResult,d=_.hitPoint,m=_.hitNormal,y=u.copy(new u,d);u.scaleAndAdd(y,y,m,n);var b=new u(a);return b.y+=n,u.subtract(i.position,y,b),c.rotationTo(i.rotation,u.UNIT_Y,m),i},r._updatePelvisOffset=function(t,i,o){var e=i.y<o.y?i:o;y(this._pelvisOffset,this._pelvisOffset,e,t,e.y>this._pelvisOffset.y?10:15)},i}(p)).prototype,"debug",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=i(J.prototype,"footIKTraceStartBias",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),N=i(J.prototype,"footIKTrackDistanceBelowFoot",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.45}}),Z=i(J.prototype,"leftFootIKSetting",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new G}}),j=i(J.prototype,"rightFootIKSetting",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new G}}),U=i(J.prototype,"_animationController",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(J.prototype,"_controller",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=J))||E)||E)||E)),function(){function t(t,i){void 0===t&&(t=new u),void 0===i&&(i=new c),this.position=t,this.rotation=i}var i=t.prototype;return i.identity=function(){return u.zero(this.position),c.identity(this.rotation),this},t.copy=function(t,i){u.copy(t.position,i.position),c.copy(t.rotation,i.rotation)},i.interopTo=function(t,i){y(this.position,this.position,t.position,i,t.position.y>this.position.y?30:15),b(this.rotation,this.rotation,t.rotation,i,30)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Procedural2Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Component.ts","./Input.ts","./Predefined.ts","./Node.ts","./DebugDraw.ts","./Event.ts","./ShowTraceSwitch.ts"],(function(t){var e,i,n,r,o,a,l,s,u,c,p,h,_,m,f,y,d,g,v,w,b,C,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.CharacterController,u=t.Vec3,c=t.find,p=t.toDegree,h=t.Quat,_=t.toRadian,m=t.NodeSpace,f=t.geometry,y=t.physics,d=t.Component},function(t){g=t.injectComponent},function(t){v=t.globalInputManager},function(t){w=t.PredefinedActionId,b=t.PredefinedAxisId},function(t){C=t.getForward},null,function(t){P=t.Event},null],execute:function(){var I,J,M,z,N,V,T,k,D,S,R,Y,j,A;a._RF.push({},"f4bf33i3XRNCb+1u5q1yYAf","Procedural2Controller",void 0);var F=l.ccclass,x=l.property;t("Procedural2Controller",(I=F("Procedural2Controller"),J=l.property({unit:"°/s"}),M=l.property({unit:"m/s"}),z=l.property({unit:"m/s²"}),N=l.property({unit:"s"}),V=g(s),I((D=e((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"debug",D,r(e)),n(e,"moveTurnSpeed",S,r(e)),n(e,"moveSpeed",R,r(e)),n(e,"gravity",Y,r(e)),n(e,"jumpPreparationDuration",j,r(e)),e._cacheVelocity=new u,e.onJumped=new P,n(e,"_characterController",A,r(e)),e._hasMovementInput=!1,e._velocityY=0,e._movement=new u,e._falling=!1,e._walkableNormal=new u(u.UNIT_Y),e._lastContact=new u,e._isPreparingJump=!1,e._jumpPreparationTimer=0,e._shouldFadeView=!0,e}i(e,t);var a=e.prototype;return a.start=function(){},a.onEnable=function(){this._characterController.on("onControllerColliderHit",this._onPhysicalCharacterControllerHit,this)},a.onDisable=function(){this._characterController.off("onControllerColliderHit",this._onPhysicalCharacterControllerHit,this)},a.update=function(t){v.getAction(w.ControlMode)&&(this._shouldFadeView=!this._shouldFadeView),this._updateJumpPreparation(t),this._applyLocomotionInput(t)},a._applyLocomotionInput=function(t){var e=this._movement;u.zero(e),this._hasMovementInput=!1,this._canMove&&(this._applyInput(t),u.equals(e,u.ZERO)||this._falling||(this._updateWalkableNormal(),this._applySliding(e))),this._applyJumpInput(t),this._velocityY+=-this.gravity*t,e.y+=this._velocityY*t,this._falling||(e.y-=.1),this._characterController.move(e),this._characterController.isGrounded?(this._velocityY=0,this._falling=!1):this._falling=!0},a._applyInput=function(t){var e=v.getAxisValue(b.MoveForward),i=v.getAxisValue(b.MoveRight),n=new u(-i,0,e);u.equals(n,u.ZERO)||(this._hasMovementInput=!0,this._faceView(t),u.normalize(n,n),this._transformInputVector(n),u.multiplyScalar(this._movement,n,this.moveSpeed*t))},a._applyJumpInput=function(t){this._canJump&&v.getAction(w.Jump)&&(this._jumpPreparationTimer=0,this._isPreparingJump=!0,this.onJumped.invoke())},a._getViewDirection=function(t){if(!this._shouldFadeView)return u.copy(t,C(this.node));var e=c("Main Camera");return e?u.negate(t,C(e)):u.set(t,0,0,-1)},a._faceView=function(t){var e=this._getViewDirection(new u);e.y=0,e.normalize();var i=C(this.node);i.y=0,i.normalize();var n,r,o,a,l,s=(n=i,r=e,o=u.UNIT_Y,a=u.angle(n,r),(l=u.cross(new u,n,r)).normalize(),u.dot(l,o)<0?-a:a),c=p(Math.abs(s)),f=this.moveTurnSpeed*t,y=Math.min(f,c),d=h.fromAxisAngle(new h,u.UNIT_Y,Math.sign(s)*_(y));this.node.rotate(d,m.WORLD)},a._transformInputVector=function(t){var e=this._getViewDirection(new u);e.y=0,u.normalize(e,e);var i=h.rotationTo(new h,u.UNIT_Z,e);u.transformQuat(t,t,i)},a._onPhysicalCharacterControllerHit=function(t){},a._updateWalkableNormal=function(){u.copy(this._walkableNormal,u.UNIT_Y);var t=new u(this.node.worldPosition),e=f.Ray.set(new f.Ray,t.x,t.y,t.z,0,-1,0),i=y.PhysicsSystem.instance;i.raycastClosest(e,void 0,1,!1)&&u.copy(this._walkableNormal,i.raycastClosestResult.hitNormal)},a._applySliding=function(t){this._falling||u.angle(this._walkableNormal,t)>Math.PI/2||u.projectOnPlane(t,new u(t),this._walkableNormal)},a._updateJumpPreparation=function(t){this._isPreparingJump&&(this._jumpPreparationTimer+=t,this._jumpPreparationTimer>=this.jumpPreparationDuration&&(this._isPreparingJump=!1,this._doJump()))},a._doJump=function(){this._falling=!0,this._velocityY=5},o(e,[{key:"velocity",get:function(){return u.set(this._cacheVelocity,this._characterController.velocity.x,this._velocityY,this._characterController.velocity.z)}},{key:"falling",get:function(){return this._falling}},{key:"hasMovementInput",get:function(){return this._hasMovementInput}},{key:"_canJump",get:function(){return!this._falling&&!this._isPreparingJump}},{key:"_canMove",get:function(){return!this._isPreparingJump}}]),e}(d)).prototype,"debug",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=e(k.prototype,"moveTurnSpeed",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 270}}),R=e(k.prototype,"moveSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),Y=e(k.prototype,"gravity",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9.18}}),j=e(k.prototype,"jumpPreparationDuration",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(k.prototype,"_characterController",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=k))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShowTraceSwitch.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){c("setGlobalShowTraces",(function(e){c("globalShowTraces",e)})),e._RF.push({},"46424PZadRGDoYBLA06wzH/","ShowTraceSwitch",void 0);c("globalShowTraces",!1);e._RF.pop()}}}));

System.register("chunks:///_virtual/TimeScale.ts",["cc"],(function(e){var t,i,r,n;return{setters:[function(e){t=e.cclegacy,i=e.game,r=e.error,n=e.Director}],execute:function(){e("setTimeScale",(function(e){u().multiplier=e})),t._RF.push({},"8d9f242JsBNO7JnkGlDstcA","TimeScale",void 0);var c,u=function(){if(!c){var e={multiplier:1},t=n.prototype.tick;n.prototype.tick=function(i){for(var r=arguments.length,n=new Array(r>1?r-1:0),c=1;c<r;c++)n[c-1]=arguments[c];t.call.apply(t,[this,i*e.multiplier].concat(n))},c=e}return c};"__debugTickSlow"in globalThis||Object.defineProperty(globalThis,"__debugTickSlow",{value:function(e){if(i.isPaused()){var t=1/60*u().multiplier,n=e/t,c=Math.trunc(n),l=n-c,o=function(){return setTimeout((function(){return i.step()}),1e3*l)};if(0===c)o();else var a=setInterval((function(){i.step(),0===--c&&(clearInterval(a),o())}),1e3*t)}else r("You should pause to use __debugTickN()")}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/TimeScaleUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeScale.ts"],(function(e){var t,n,o,r,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Slider,i=e.Component},function(e){c=e.setTimeScale}],execute:function(){var a;n._RF.push({},"a7984LE81BBLKwq2Lv1nmtX","TimeScaleUI",void 0);var s=o.ccclass;o.property,e("TimeScaleUI",s("TimeScaleUI")(a=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){var e=this.node.getComponent(r);e&&this.onSliderValueChanged(e)},o.onSliderValueChanged=function(e){c(e.progress)},n}(i))||a);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});